# yaml-language-server: $schema=https://storage.googleapis.com/coderabbit_public_assets/schema.v2.json

# =============================================================================
# CodeRabbit Configuration for Snack-Storyteller
# AI ë‹¨í¸ ì†Œì„¤ ìƒì„± í”Œë«í¼ (React + NestJS + Prisma Monorepo)
# í”„ë¡œì íŠ¸ ë¶„ì„ ê¸°ë°˜ ë§ì¶¤ ì„¤ì • (2025-01)
# =============================================================================

language: "ko-KR"
tone_instructions: |
  í•œêµ­ì–´ë¡œ ë¦¬ë·°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.
  - ê°œë°œ ìš©ì–´(ë³€ìˆ˜ëª…, í•¨ìˆ˜ëª…, ê¸°ìˆ  ìš©ì–´, ë¼ì´ë¸ŒëŸ¬ë¦¬ëª…)ëŠ” ì˜ì–´ë¡œ ìœ ì§€
  - ì„¤ëª…ê³¼ ì œì•ˆì€ ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´ë¡œ ì‘ì„±
  - ì¹œê·¼í•˜ì§€ë§Œ ì „ë¬¸ì ì¸ í†¤ ìœ ì§€
  - ì½”ë“œ ê°œì„  ì œì•ˆ ì‹œ êµ¬ì²´ì ì¸ ì˜ˆì‹œ ì½”ë“œ í¬í•¨
  - AI/í”„ë¡¬í”„íŠ¸ ê´€ë ¨ ì½”ë“œëŠ” íŠ¹íˆ ë³´ì•ˆê³¼ í’ˆì§ˆì— ì£¼ì˜
  - ì´ í”„ë¡œì íŠ¸ëŠ” AI ë‹¨í¸ ì†Œì„¤ ìƒì„± í”Œë«í¼ì…ë‹ˆë‹¤

early_access: false
enable_free_tier: true

reviews:
  profile: "chill"
  request_changes_workflow: false
  high_level_summary: true
  high_level_summary_placeholder: "@coderabbitai summary"
  high_level_summary_in_walkthrough: true
  auto_title_placeholder: "@coderabbitai"
  auto_title_instructions: |
    PR ì œëª©ì„ ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ìƒì„±í•´ì£¼ì„¸ìš”:
    - Conventional Commits í˜•ì‹ (feat:, fix:, docs:, refactor:, test:, chore:)
    - í•œêµ­ì–´ë¡œ ê°„ê²°í•˜ê²Œ ì‘ì„±
    - ì˜ˆì‹œ: "feat(writer): ì‘ê°€ í˜ë¥´ì†Œë‚˜ systemPrompt í•„ë“œ ì¶”ê°€"
    - ìŠ¤ì½”í”„ ì˜ˆì‹œ: auth, writer, story, ai, web, prisma
  review_status: true
  commit_status: true
  fail_commit_status: false
  poem: false
  collapse_walkthrough: false
  sequence_diagrams: true
  changed_files_summary: true
  estimate_code_review_effort: true
  assess_linked_issues: true
  related_issues: true
  related_prs: true
  suggested_labels: true
  auto_apply_labels: false
  suggested_reviewers: false
  auto_assign_reviewers: false

  # =============================================================================
  # ìë™ ë¼ë²¨ë§ ê·œì¹™ (ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬ì¡° ê¸°ë°˜)
  # =============================================================================
  labeling_instructions:
    - label: "frontend"
      instructions: "apps/web/ ê²½ë¡œì˜ íŒŒì¼ì´ ë³€ê²½ëœ ê²½ìš°"
    - label: "backend"
      instructions: "apps/server/ ê²½ë¡œì˜ íŒŒì¼ì´ ë³€ê²½ëœ ê²½ìš°"
    - label: "ai"
      instructions: "apps/server/src/ai/ ê²½ë¡œ (prompt, moderation, errors) íŒŒì¼ ë³€ê²½"
    - label: "auth"
      instructions: "apps/server/src/auth/ ê²½ë¡œì˜ ì¸ì¦ ê´€ë ¨ ì½”ë“œ ë³€ê²½"
    - label: "writer"
      instructions: "apps/server/src/writer/ ë˜ëŠ” apps/web/src/components/writer/ ë³€ê²½"
    - label: "story"
      instructions: "apps/server/src/story/ ë˜ëŠ” ìŠ¤í† ë¦¬ ìƒì„± ê´€ë ¨ ì½”ë“œ ë³€ê²½"
    - label: "database"
      instructions: "apps/server/prisma/ ê²½ë¡œì˜ schema ë˜ëŠ” migration ë³€ê²½"
    - label: "ui"
      instructions: "apps/web/src/components/ui/ ë˜ëŠ” packages/ui/ ë³€ê²½"
    - label: "shared"
      instructions: "packages/types/ ë˜ëŠ” packages/utils/ ë³€ê²½"
    - label: "documentation"
      instructions: "README.md, CLAUDE.md, specs/ ê²½ë¡œ ë³€ê²½"
    - label: "config"
      instructions: "ì„¤ì • íŒŒì¼(.env, yaml, json config, docker-compose) ë³€ê²½"

  # =============================================================================
  # ë¦¬ë·° ì œì™¸ ê²½ë¡œ (ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬ì¡° ê¸°ë°˜)
  # =============================================================================
  path_filters:
    - "!**/node_modules/**"
    - "!**/dist/**"
    - "!**/build/**"
    - "!**/.next/**"
    - "!**/coverage/**"
    - "!**/*.lock"
    - "!**/pnpm-lock.yaml"
    - "!**/*.min.js"
    - "!**/*.min.css"
    - "!**/generated/**"
    - "!**/.claude/**"
    - "!**/.serena/**"
    - "!**/.husky/**"
    - "!**/assets/*.svg"

  # =============================================================================
  # ê²½ë¡œë³„ ë¦¬ë·° ì§€ì¹¨ (ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬ì¡° ê¸°ë°˜)
  # =============================================================================
  path_instructions:
    # -------------------------------------------------------------------------
    # Backend - NestJS Core
    # -------------------------------------------------------------------------
    - path: "apps/server/src/**/*.ts"
      instructions: |
        NestJS ë°±ì—”ë“œ ì½”ë“œë¥¼ ë¦¬ë·°í•©ë‹ˆë‹¤:
        - SOLID ì›ì¹™ ì¤€ìˆ˜ ì—¬ë¶€
        - Dependency Injection íŒ¨í„´ ì˜¬ë°”ë¥¸ ì‚¬ìš©
        - Controller â†’ Service ë ˆì´ì–´ ë¶„ë¦¬
        - class-validator DTO ê²€ì¦ ì ìš©
        - ì—ëŸ¬ í•¸ë“¤ë§ ë° ì ì ˆí•œ HTTP ì˜ˆì™¸ ì‚¬ìš©
        - ë¹„ë™ê¸° ì²˜ë¦¬ (async/await) íŒ¨í„´
        - ë³´ì•ˆ ì·¨ì•½ì  (ì¸ì ì…˜, ì¸ì¦ ìš°íšŒ ë“±)

    # -------------------------------------------------------------------------
    # AI Module - í•µì‹¬ ë¦¬ë·° ì˜ì—­
    # -------------------------------------------------------------------------
    - path: "apps/server/src/ai/**/*.ts"
      instructions: |
        ğŸ¤– AI/LLM ê´€ë ¨ ì½”ë“œëŠ” íŠ¹ë³„íˆ ì£¼ì˜í•´ì„œ ë¦¬ë·°í•©ë‹ˆë‹¤:
        - í”„ë¡¬í”„íŠ¸ ì¸ì ì…˜ ê³µê²© ë°©ì§€ (ì‚¬ìš©ì ì…ë ¥ ì´ìŠ¤ì¼€ì´í”„)
        - API í‚¤ ë…¸ì¶œ ì—¬ë¶€ í™•ì¸ (í•˜ë“œì½”ë”© ê¸ˆì§€)
        - í† í° ì‚¬ìš©ëŸ‰ ìµœì í™”
        - ì—ëŸ¬ í•¸ë“¤ë§ ë° ì¬ì‹œë„ ë¡œì§
        - ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ì²˜ë¦¬ ì•ˆì •ì„±
        - Rate limiting ì ìš© ì—¬ë¶€

    - path: "apps/server/src/ai/prompt/**/*.ts"
      instructions: |
        ğŸ“ í”„ë¡¬í”„íŠ¸ ë¹Œë” ì½”ë“œ ë¦¬ë·°:
        - í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ëª…í™•ì„±ê³¼ íš¨ìœ¨ì„±
        - Few-shot examples í’ˆì§ˆ
        - í† í° ìµœì í™” ì „ëµ
        - ë‹¤êµ­ì–´(í•œêµ­ì–´) ì²˜ë¦¬ ì ì ˆì„±
        - í”„ë¡¬í”„íŠ¸ ë²„ì „ ê´€ë¦¬

    - path: "apps/server/src/ai/moderation/**/*.ts"
      instructions: |
        ğŸ›¡ï¸ ì½˜í…ì¸  ëª¨ë”ë ˆì´ì…˜ ì½”ë“œ ë¦¬ë·°:
        - í•œêµ­ì–´ í•„í„°ë§ ì •í™•ì„± (korean-filter.ts)
        - ìœ í•´ ì½˜í…ì¸  ì°¨ë‹¨ ë¡œì§
        - False positive/negative ê³ ë ¤
        - ëª¨ë”ë ˆì´ì…˜ API ì—ëŸ¬ ì²˜ë¦¬

    - path: "apps/server/src/ai/errors/**/*.ts"
      instructions: |
        AI ì—ëŸ¬ ì²˜ë¦¬ ì½”ë“œ ë¦¬ë·°:
        - ì»¤ìŠ¤í…€ ì˜ˆì™¸ í´ë˜ìŠ¤ ì„¤ê³„
        - ì—ëŸ¬ ë©”ì‹œì§€ ëª…í™•ì„±
        - ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ì‘ë‹µ
        - ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ ì—°ê³„

    # -------------------------------------------------------------------------
    # Auth Module
    # -------------------------------------------------------------------------
    - path: "apps/server/src/auth/**/*.ts"
      instructions: |
        ğŸ” ì¸ì¦/ì¸ê°€ ì½”ë“œëŠ” ë³´ì•ˆì— ì§‘ì¤‘í•˜ì—¬ ë¦¬ë·°:
        - JWT í† í° ë§Œë£Œ ì‹œê°„ ì ì ˆì„±
        - bcrypt ì†”íŠ¸ ë¼ìš´ë“œ (12 ê¶Œì¥)
        - Guard ë° Decorator ì ìš©
        - Refresh token ì²˜ë¦¬ (í•´ë‹¹ ì‹œ)
        - CORS ì„¤ì • ê²€í† 
        - ë¯¼ê° ì •ë³´ ë¡œê¹… ê¸ˆì§€

    - path: "apps/server/src/auth/strategies/**/*.ts"
      instructions: |
        Passport JWT Strategy ë¦¬ë·°:
        - í† í° ê²€ì¦ ë¡œì§ ì •í™•ì„±
        - ì‚¬ìš©ì ì¡°íšŒ ìµœì í™”
        - ì—ëŸ¬ í•¸ë“¤ë§

    - path: "apps/server/src/auth/guards/**/*.ts"
      instructions: |
        NestJS Guard ë¦¬ë·°:
        - ì¸ì¦/ì¸ê°€ ë¡œì§ ë¶„ë¦¬
        - ì˜ˆì™¸ ì²˜ë¦¬ ì ì ˆì„±

    - path: "apps/server/src/auth/dto/**/*.ts"
      instructions: |
        ì¸ì¦ DTO ë¦¬ë·°:
        - ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ ê·œì¹™
        - class-validator ë°ì½”ë ˆì´í„° ì ìš©
        - ë³´ì•ˆì— ë¯¼ê°í•œ í•„ë“œ ì²˜ë¦¬

    # -------------------------------------------------------------------------
    # Writer Module
    # -------------------------------------------------------------------------
    - path: "apps/server/src/writer/**/*.ts"
      instructions: |
        âœï¸ ì‘ê°€ í˜ë¥´ì†Œë‚˜ ëª¨ë“ˆ ë¦¬ë·°:
        - systemPrompt í•„ë“œ ë³´ì•ˆ (ì‚¬ìš©ì ì…ë ¥ ê²€ì¦)
        - CRUD ì‘ì—… ê¶Œí•œ ê²€ì¦ (ì†Œìœ ì í™•ì¸)
        - isPublic í”Œë˜ê·¸ ì²˜ë¦¬
        - ì´ë¯¸ì§€ URL ê²€ì¦
        - ì¥ë¥´(genre) ë°°ì—´ ì²˜ë¦¬

    - path: "apps/server/src/writer/dto/**/*.ts"
      instructions: |
        ì‘ê°€ DTO ë¦¬ë·°:
        - systemPrompt ê¸¸ì´ ì œí•œ
        - genre ë°°ì—´ ê²€ì¦
        - Optional í•„ë“œ ì²˜ë¦¬

    # -------------------------------------------------------------------------
    # Story Module
    # -------------------------------------------------------------------------
    - path: "apps/server/src/story/**/*.ts"
      instructions: |
        ğŸ“– ì†Œì„¤ ìƒì„±/ê´€ë¦¬ ëª¨ë“ˆ ë¦¬ë·°:
        - AI ìƒì„± ì½˜í…ì¸  ì €ì¥ ë¡œì§
        - wordCount, readTime ê³„ì‚° ì •í™•ì„±
        - íƒœê·¸(tags) ì²˜ë¦¬
        - ê¶Œí•œ ê²€ì¦ (ì†Œìœ ì/ê³µê°œ ì—¬ë¶€)
        - í˜ì´ì§€ë„¤ì´ì…˜ ìµœì í™”

    - path: "apps/server/src/story/dto/**/*.ts"
      instructions: |
        ì†Œì„¤ DTO ë¦¬ë·°:
        - GenerateStoryDto ì…ë ¥ ê²€ì¦
        - íƒœê·¸ ë°°ì—´ ì œí•œ
        - í•„í„° DTO ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°

    # -------------------------------------------------------------------------
    # Prisma & Database
    # -------------------------------------------------------------------------
    - path: "apps/server/prisma/schema.prisma"
      instructions: |
        ğŸ—„ï¸ Prisma ìŠ¤í‚¤ë§ˆ ë¦¬ë·°:
        - User, Writer, Story, Bookmark ëª¨ë¸ ê´€ê³„ ì ì ˆì„±
        - ì¸ë±ìŠ¤ ì„¤ì • (@@index) - ì¿¼ë¦¬ ì„±ëŠ¥
        - Cascade ì‚­ì œ ê·œì¹™ (onDelete: Cascade)
        - í•„ë“œ íƒ€ì… (@db.Text ë“±)
        - @unique, @default ë°ì½”ë ˆì´í„°

    - path: "apps/server/prisma/migrations/**"
      instructions: |
        ë§ˆì´ê·¸ë ˆì´ì…˜ ë¦¬ë·°:
        - ë°ì´í„° ì†ì‹¤ ê°€ëŠ¥ì„± í™•ì¸
        - ë¡¤ë°± ê°€ëŠ¥ì„± ê³ ë ¤
        - ëŒ€ìš©ëŸ‰ í…Œì´ë¸” ë³€ê²½ ì‹œ ì„±ëŠ¥ ì˜í–¥

    - path: "apps/server/src/prisma/**/*.ts"
      instructions: |
        PrismaService ë¦¬ë·°:
        - ì—°ê²° í’€ë§ ì„¤ì •
        - ì—ëŸ¬ í•¸ë“¤ë§
        - íŠ¸ëœì­ì…˜ ì²˜ë¦¬

    # -------------------------------------------------------------------------
    # Common Utilities
    # -------------------------------------------------------------------------
    - path: "apps/server/src/common/**/*.ts"
      instructions: |
        ê³µí†µ ìœ í‹¸ë¦¬í‹° ë¦¬ë·°:
        - @CurrentUser ë°ì½”ë ˆì´í„° íƒ€ì… ì•ˆì „ì„±
        - JwtAuthGuard ì ìš© ë²”ìœ„
        - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ê³„

    # -------------------------------------------------------------------------
    # Frontend - React (Vite)
    # -------------------------------------------------------------------------
    - path: "apps/web/src/**/*.{ts,tsx}"
      instructions: |
        React í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ë¦¬ë·°:
        - React 18 best practices
        - Hooks ê·œì¹™ ì¤€ìˆ˜ (ì˜ì¡´ì„± ë°°ì—´)
        - ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€
        - TypeScript íƒ€ì… ì•ˆì „ì„±
        - ì ‘ê·¼ì„± (a11y) ê³ ë ¤

    - path: "apps/web/src/components/**/*.tsx"
      instructions: |
        React ì»´í¬ë„ŒíŠ¸ ë¦¬ë·°:
        - Props íƒ€ì… ì •ì˜ ëª…í™•ì„±
        - ì»´í¬ë„ŒíŠ¸ ë‹¨ì¼ ì±…ì„
        - Tailwind CSS í´ë˜ìŠ¤ ì •ë¦¬
        - ë¡œë”©/ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬

    - path: "apps/web/src/components/ui/**/*.tsx"
      instructions: |
        UI ì»´í¬ë„ŒíŠ¸ (shadcn/ui ê¸°ë°˜) ë¦¬ë·°:
        - ì¬ì‚¬ìš©ì„± ë° í™•ì¥ì„±
        - Props ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„
        - ì ‘ê·¼ì„± (aria ì†ì„±)
        - ë‹¤í¬ í…Œë§ˆ ì§€ì›

    - path: "apps/web/src/components/writer/**/*.tsx"
      instructions: |
        ì‘ê°€ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ ë¦¬ë·°:
        - WriterCard, WriterForm, WriterGallery ì»´í¬ë„ŒíŠ¸
        - í¼ ê²€ì¦ ë¡œì§
        - ì´ë¯¸ì§€ í‘œì‹œ ì²˜ë¦¬

    - path: "apps/web/src/hooks/**/*.ts"
      instructions: |
        Custom Hooks ë¦¬ë·°:
        - useStoryGeneration ë“± ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
        - Hook ê·œì¹™ ì¤€ìˆ˜
        - ì˜ì¡´ì„± ë°°ì—´ ì •í™•ì„±
        - ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°©ì§€ (cleanup)

    - path: "apps/web/src/stores/**/*.ts"
      instructions: |
        Zustand ìŠ¤í† ì–´ ë¦¬ë·°:
        - auth.store.ts, writer.store.ts ìƒíƒœ ê´€ë¦¬
        - ìƒíƒœ êµ¬ì¡° ì„¤ê³„
        - ì•¡ì…˜ ëª…í™•ì„±
        - ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€

    - path: "apps/web/src/api/**/*.ts"
      instructions: |
        API í˜¸ì¶œ ì½”ë“œ ë¦¬ë·°:
        - lib/api.ts ê¸°ë°˜ ìš”ì²­
        - ì—ëŸ¬ í•¸ë“¤ë§
        - íƒ€ì… ì•ˆì „ì„±

    - path: "apps/web/src/pages/**/*.tsx"
      instructions: |
        í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ë¦¬ë·°:
        - LoginPage, RegisterPage ì¸ì¦ í˜ì´ì§€
        - WritersPage, WriterDetailPage ì‘ê°€ í˜ì´ì§€
        - GenerateStoryPage ì†Œì„¤ ìƒì„± í˜ì´ì§€
        - ë¼ìš°íŒ… ë° ì¸ì¦ ê°€ë“œ
        - ë¡œë”©/ì—ëŸ¬ ìƒíƒœ

    - path: "apps/web/src/types/**/*.ts"
      instructions: |
        íƒ€ì… ì •ì˜ ë¦¬ë·°:
        - auth.ts, writer.ts íƒ€ì…
        - ë°±ì—”ë“œ DTOì™€ì˜ ì¼ê´€ì„±
        - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ íƒ€ì…

    - path: "apps/web/src/lib/**/*.ts"
      instructions: |
        ìœ í‹¸ë¦¬í‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¦¬ë·°:
        - api.ts HTTP í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
        - utils.ts í—¬í¼ í•¨ìˆ˜
        - ì—ëŸ¬ í•¸ë“¤ë§

    # -------------------------------------------------------------------------
    # Shared Packages
    # -------------------------------------------------------------------------
    - path: "packages/ui/src/**/*.{ts,tsx}"
      instructions: |
        ê³µìœ  UI íŒ¨í‚¤ì§€ ë¦¬ë·°:
        - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
        - ì˜ì¡´ì„± ìµœì†Œí™”
        - íƒ€ì… export

    - path: "packages/types/src/**/*.ts"
      instructions: |
        ê³µìœ  íƒ€ì… íŒ¨í‚¤ì§€ ë¦¬ë·°:
        - í”„ë¡ íŠ¸/ë°±ì—”ë“œ ê³µìœ  íƒ€ì…
        - Generic íƒ€ì… í™œìš©
        - ë¬¸ì„œí™” (JSDoc)

    - path: "packages/utils/src/**/*.ts"
      instructions: |
        ê³µìœ  ìœ í‹¸ë¦¬í‹° íŒ¨í‚¤ì§€ ë¦¬ë·°:
        - ìˆœìˆ˜ í•¨ìˆ˜ ì„¤ê³„
        - í…ŒìŠ¤íŠ¸ ìš©ì´ì„±
        - ì˜ì¡´ì„± ìµœì†Œí™”

    # -------------------------------------------------------------------------
    # Configuration & DevOps
    # -------------------------------------------------------------------------
    - path: "docker-compose.yml"
      instructions: |
        Docker Compose ë¦¬ë·°:
        - PostgreSQL ì„¤ì •
        - ë³¼ë¥¨ ë§ˆìš´íŠ¸
        - ë„¤íŠ¸ì›Œí¬ ì„¤ì •
        - í™˜ê²½ ë³€ìˆ˜ ì²˜ë¦¬

    - path: "**/*.{json,yaml,yml}"
      instructions: |
        ì„¤ì • íŒŒì¼ ë¦¬ë·°:
        - ë¯¼ê° ì •ë³´ ë…¸ì¶œ ì—¬ë¶€
        - í™˜ê²½ë³„ ì„¤ì • ë¶„ë¦¬
        - ë¬¸ë²• ì˜¤ë¥˜

    - path: ".github/workflows/**"
      instructions: |
        GitHub Actions ì›Œí¬í”Œë¡œìš° ë¦¬ë·°:
        - ë³´ì•ˆ (secrets ì‚¬ìš©)
        - ìºì‹œ í™œìš©
        - ë³‘ë ¬ ì‹¤í–‰ ìµœì í™”

    - path: "scripts/**"
      instructions: |
        ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ë¦¬ë·°:
        - ë³´ì•ˆ ì·¨ì•½ì 
        - ì—ëŸ¬ í•¸ë“¤ë§
        - ì´ì‹ì„±

    # -------------------------------------------------------------------------
    # Specs & Documentation
    # -------------------------------------------------------------------------
    - path: "specs/**/*.md"
      instructions: |
        ëª…ì„¸ ë¬¸ì„œ ë¦¬ë·°:
        - Phaseë³„ spec, plan, tasks ì¼ê´€ì„±
        - ìš”êµ¬ì‚¬í•­ ëª…í™•ì„±
        - ê¸°ìˆ  ì„¤ê³„ ì ì ˆì„±

    # -------------------------------------------------------------------------
    # Tests
    # -------------------------------------------------------------------------
    - path: "**/*.{test,spec}.{ts,tsx}"
      instructions: |
        í…ŒìŠ¤íŠ¸ ì½”ë“œ ë¦¬ë·°:
        - í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì¶©ë¶„ì„±
        - í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ëª…í™•í•œ ì„¤ëª…
        - ì—£ì§€ ì¼€ì´ìŠ¤ í¬í•¨ ì—¬ë¶€
        - Mock ì ì ˆí•œ ì‚¬ìš©
        - í…ŒìŠ¤íŠ¸ ê²©ë¦¬

  abort_on_close: true
  disable_cache: false

  auto_review:
    enabled: true
    auto_incremental_review: true
    ignore_title_keywords:
      - "WIP"
      - "DO NOT MERGE"
      - "DRAFT"
      - "[skip ci]"
      - "[skip review]"
    labels: []
    drafts: false
    base_branches:
      - main
      - develop

  # =============================================================================
  # ì½”ë“œ ìƒì„± ì˜µì…˜
  # =============================================================================
  finishing_touches:
    docstrings:
      enabled: true
    unit_tests:
      enabled: true

  # =============================================================================
  # ì •ì  ë¶„ì„ ë„êµ¬ (í”„ë¡œì íŠ¸ ì„¤ì • ê¸°ë°˜)
  # =============================================================================
  tools:
    eslint:
      enabled: true
    prismaLint:
      enabled: true
    gitleaks:
      enabled: true
    markdownlint:
      enabled: true
    yamllint:
      enabled: true
    hadolint:
      enabled: true
    actionlint:
      enabled: true
    shellcheck:
      enabled: true
    biome:
      enabled: false  # ESLint ì‚¬ìš© (.eslintrc.json)
    ast-grep:
      essential_rules: true
      rule_dirs: []
      packages: []

# =============================================================================
# Chat ì„¤ì •
# =============================================================================
chat:
  auto_reply: true
  integrations:
    jira:
      usage: auto
    linear:
      usage: auto

# =============================================================================
# Knowledge Base ì„¤ì •
# =============================================================================
knowledge_base:
  opt_out: false
  web_search:
    enabled: true
  code_guidelines:
    enabled: true
    filePatterns:
      - "CLAUDE.md"
      - "README.md"
      - ".eslintrc.json"
      - "tsconfig.json"
      - "specs/**/*.md"
  learnings:
    scope: auto
  issues:
    scope: auto
  pull_requests:
    scope: auto

# =============================================================================
# ì½”ë“œ ìƒì„± ì„¤ì •
# =============================================================================
code_generation:
  docstrings:
    language: "ko-KR"
    path_instructions:
      - path: "apps/server/**/*.ts"
        instructions: |
          JSDoc í˜•ì‹ìœ¼ë¡œ ì‘ì„±
          - @description: í•¨ìˆ˜/í´ë˜ìŠ¤ ì„¤ëª… (í•œêµ­ì–´)
          - @param: íŒŒë¼ë¯¸í„° ì„¤ëª…
          - @returns: ë°˜í™˜ê°’ ì„¤ëª…
          - @throws: ì˜ˆì™¸ ìƒí™© ì„¤ëª…
      - path: "apps/web/**/*.tsx"
        instructions: |
          React ì»´í¬ë„ŒíŠ¸ìš© JSDoc í˜•ì‹
          - ì»´í¬ë„ŒíŠ¸ ì„¤ëª…
          - Props ì„¤ëª…
  unit_tests:
    path_instructions:
      - path: "apps/server/**/*.ts"
        instructions: |
          Jest + NestJS Testing íŒ¨í„´ ì‚¬ìš©
          - describe/it ë¸”ë¡ êµ¬ì¡°
          - AAA íŒ¨í„´ (Arrange, Act, Assert)
          - Mock ì ì ˆíˆ í™œìš©
      - path: "apps/web/**/*.tsx"
        instructions: |
          Vitest + React Testing Library íŒ¨í„´ ì‚¬ìš©
          - ì‚¬ìš©ì ê´€ì  í…ŒìŠ¤íŠ¸
          - ì ‘ê·¼ì„± ì¿¼ë¦¬ ìš°ì„  ì‚¬ìš©
